<script src="https://js.stripe.com/v3"></script>
<section class="purchase">
      {% for item in site.data.books %} <!-- Get everything in the books file -->
        <h3 class="purchase--heading">Purchase the {{ item.title }} book</h3>
        <h4 class="purchase--price"> £{{ item.unit_price }} + shipping</h4>
        <p class="purchase--action"><button id="checkout-button-sku_GlOAeVsxcgFBex" role="link" class="buy">UK shipping – buy now</button> (+£5 shipping)</p>
        <p class="purchase--action"><button id="checkout-button-sku_GlP6MnoJuzggI3" role="link" class="buy">Int. shipping – buy now</button> (+£14.95 shipping)</p>
      {% endfor %}
      <p class="purchase--deliveryest">Publication is estimated to ship in April 2020.</p>
</section>

<div id="error-message"></div>
<script>
(function() {
  var stripe = Stripe('pk_test_WJGgYhC3uLXBeI5eSi4nrDiq00GwWHHHHo');

  var checkoutButton = document.getElementById('checkout-button-sku_GlOAeVsxcgFBex');
  checkoutButton.addEventListener('click', function () {
    stripe.redirectToCheckout({
      items: [{sku: 'sku_GlOAeVsxcgFBex', quantity: 1}],

      successUrl: 'https://www.tenoclockbooks.com/success',
      cancelUrl: 'https://www.tenoclockbooks.com/canceled',

    })
    .then(function (result) {
      if (result.error) {
        var displayError = document.getElementById('error-message');
        displayError.textContent = result.error.message;
      }
    });
  });
})();
</script>
<script>
(function() {
  var stripe = Stripe('pk_test_WJGgYhC3uLXBeI5eSi4nrDiq00GwWHHHHo');

  var checkoutButton = document.getElementById('checkout-button-sku_GlP6MnoJuzggI3');
  checkoutButton.addEventListener('click', function () {
    stripe.redirectToCheckout({
      items: [{sku: 'sku_GlP6MnoJuzggI3', quantity: 1}],

      successUrl: 'https://www.tenoclockbooks.com/success',
      cancelUrl: 'https://www.tenoclockbooks.com/canceled',

    })
    .then(function (result) {
      if (result.error) {
        var displayError = document.getElementById('error-message');
        displayError.textContent = result.error.message;
      }
    });
  });
})();
</script>
